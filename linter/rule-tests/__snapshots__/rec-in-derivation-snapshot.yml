id: rec-in-derivation
snapshots:
  ? |
    pkgs.stdenv.mkDerivation rec { pname = "foo"; }
  : labels:
    - source: pkgs.stdenv.mkDerivation rec { pname = "foo"; }
      style: primary
      start: 0
      end: 47
    - source: rec { pname = "foo"; }
      style: secondary
      start: 25
      end: 47
    - source: mkDerivation
      style: secondary
      start: 12
      end: 24
    - source: stdenv.mkDerivation
      style: secondary
      start: 5
      end: 24
    - source: pkgs.stdenv.mkDerivation
      style: secondary
      start: 0
      end: 24
  ? |
    stdenv.mkDerivation rec { pname = "foo"; }
  : labels:
    - source: stdenv.mkDerivation rec { pname = "foo"; }
      style: primary
      start: 0
      end: 42
    - source: rec { pname = "foo"; }
      style: secondary
      start: 20
      end: 42
    - source: mkDerivation
      style: secondary
      start: 7
      end: 19
    - source: mkDerivation
      style: secondary
      start: 7
      end: 19
    - source: stdenv.mkDerivation
      style: secondary
      start: 0
      end: 19
