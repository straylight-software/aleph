# Straylight Aleph Buck2 Configuration
#
# Hermetic builds with Nix store paths.
# Toolchain paths are set in .buckconfig.local (generated by nix develop).

[cells]
root = .
prelude = nix/build/prelude
toolchains = toolchains
none = none

[cell_aliases]
config = prelude
ovr_config = prelude
fbcode = none
fbsource = none
fbcode_macros = none
buck = none

[parser]
target_platform_detector_spec = target:root//...->prelude//platforms:default

[buck2]
materializations = deferred
digest_algorithms = BLAKE3

[build]
# Use local execution by default. For remote execution with NativeLink:
#   lre-start && buck2 build --config build.execution_platforms=toolchains//:lre //...
execution_platforms = toolchains//:local

# C++ toolchain configuration
# Paths are set via Nix in .buckconfig.local
# Example:
#   [cxx]
#   cc = /nix/store/.../bin/clang
#   cxx = /nix/store/.../bin/clang++
#   ld = /nix/store/.../bin/ld.lld

# Haskell toolchain configuration
# Example:
#   [haskell]
#   ghc = /nix/store/.../bin/ghc
#   ghc_pkg = /nix/store/.../bin/ghc-pkg

# NVIDIA toolchain configuration
# Example:
#   [nv]
#   nvidia_sdk_path = /nix/store/.../nvidia-sdk
#   nvidia_sdk_include = /nix/store/.../nvidia-sdk/include
#   nvidia_sdk_lib = /nix/store/.../nvidia-sdk/lib
