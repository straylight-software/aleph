# src/examples/lean-multifile/BUCK
#
# Multi-file Lean 4.26.0 project demonstrating:
#   - Hierarchical module imports (Straylight.Derivation, etc.)
#   - External library usage (Std.HashMap)
#   - Proof-carrying code (compile-time verified theorems)
#   - Hermetic build via Buck2 + Nix toolchain
#
# Build: buck2 build //src/examples/lean-multifile:straylight
# Run:   buck2 run //src/examples/lean-multifile:straylight

load("@toolchains//:lean.bzl", "lean_binary")

lean_binary(
    name = "straylight",
    srcs = [
        # Order matters: dependencies first, Main.lean last
        "Derivation.lean",  # Core types (no deps)
        "Proofs.lean",      # Theorems (imports Derivation)
        "Store.lean",       # Store ops (imports Derivation, Std)
        "Main.lean",        # Entry point (imports all)
    ],
    root_module = "Straylight",
    visibility = ["PUBLIC"],
)
